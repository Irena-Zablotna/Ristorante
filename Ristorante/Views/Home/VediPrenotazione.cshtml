
@{
    ViewData["Title"] = "Gestisci";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> signInManager
@inject UserManager<IdentityUser> userManager

@model Prenotazione


<style>
    #smain {
        border-bottom: none;
    }

    #contactform p {
        font-weight: normal;
        line-height: 150%;
        font-size: 16px;
        text-shadow:none;
    }
   
  /*  label{
        font-size:12px;
    }*/
</style>


<div id="contact1">
    <h3>ti aspettiamo in via Braccini 17, Torino</h3>
    <div id="contactform">

        
            <p> Gestisci la prenotazione n. @ViewBag.id:<br />
            dopo avere inserito i nuovi dati clicca "Modifica"<br />
            per cancellare clicca "Cancella"</p>
 
        <div>
            <form method="post" onsubmit="ChangeInput()">
                <div class="half left">
                    <input type="text"  id="data" asp-for="data" onfocus="(type='date')" 
                           value="@Model.data.ToShortDateString()">

                    <input asp-for="numero_tel" type="tel" id="tel"
                           pattern="[0-9]{3,5}[0-9]{7,10}" minlength="10" maxlength="15" value="@Model.numero_tel" />
                   
                    <input type="text" asp-for="numero_persone"  id="num-persone"value="@Model.numero_persone persone"
                           style="margin-bottom:5px;" onfocus="(type='number')">
                    @*<label asp-for="numero_persone">numero persone</label>*@

                    <input type="hidden" name="id" id="num-prenotazione" value="@Model.id_prenotazione">

                </div>

                <div class="half right">

                    <input type="text" id="name" name="username" value="@User.Identity.Name" readonly>

                    <select asp-for="orario">
                        <option value=""></option>
                        <option value="pranzo">pranzo</option>
                        <option value="cena">cena</option>
                        <option value="" selected disabled hidden>@Model.orario</option>
                    </select>

                    <input type="submit" id="cancella" asp-controller="Home" asp-action="Cancella" value="Cancella prenotazione" >
                    <input type="submit" id="aggiorna" asp-controller="Home" asp-action="Modifica" value="Modifica prenotazione">

                </div>

            </form>
        </div>

    </div>
 </div>

<script>
    function ChangeInput() {
        if ($("#data[type='text']"))
        {
            $("#data").attr({type:"date",}
                { value: "@Model.data"});
        }
        if ($("#num-persone[type='text']"))
        {
            $("#num-persone").attr({ type: "number",
                                 value: "@Model.numero_persone" });
        }

    }
</script>